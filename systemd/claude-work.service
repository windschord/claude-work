[Unit]
Description=ClaudeWork - Claude Code Session Manager
Documentation=https://github.com/windschord/claude-work
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=claude-work
Group=claude-work
WorkingDirectory=/opt/claude-work
EnvironmentFile=/etc/claude-work/env
# npx ではなくビルド済みの CLI を直接実行（セキュリティ向上）
ExecStart=/usr/bin/node /opt/claude-work/dist/src/bin/cli.js
Restart=on-failure
RestartSec=10
StandardOutput=journal
StandardError=journal
SyslogIdentifier=claude-work

# セキュリティ設定
NoNewPrivileges=true
ProtectSystem=strict
# ProtectHome=read-only: ホームディレクトリへの書き込みを制限
# /home 配下のプロジェクトを使用する場合は docs/SYSTEMD_SETUP.md の
# 「セキュリティ設定による制限事項」を参照してください
ProtectHome=read-only
PrivateTmp=true
ReadWritePaths=/opt/claude-work/data

[Install]
WantedBy=multi-user.target

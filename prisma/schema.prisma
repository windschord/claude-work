// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// New Session model for Docker container-based architecture
model Session {
  id          String   @id @default(uuid())
  name        String
  containerId String?  @map("container_id")
  volumeName  String   @map("volume_name")
  repoUrl     String?  @map("repo_url") // リモートリポジトリURL（localPath使用時はnull）
  localPath   String?  @map("local_path") // ローカルリポジトリのパス（repoUrl使用時はnull）
  branch      String
  status      String   @default("creating") // creating, running, stopped, error
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("sessions")
}

// Keep Prompt model for prompt history feature
model Prompt {
  id           String   @id @default(uuid())
  content      String   @unique
  used_count   Int      @default(1)
  last_used_at DateTime @default(now())
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

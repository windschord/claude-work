# US-002: Host環境との互換性維持

## ユーザーストーリー

**As a** ClaudeWorkユーザー
**I want to** Host環境でクローンされたプロジェクトが引き続き正常に動作する
**So that** Docker環境の修正がHost環境に悪影響を与えない

## 背景

Docker環境の修正を行う際、既存のHost環境プロジェクトの動作に影響を与えてはならない。

## 機能要件（EARS記法）

### 環境判別

- **REQ-012**: セッション作成時、システムはプロジェクトの`clone_location`フィールドを確認しなければならない
- **REQ-013**: `clone_location`が`host`の場合、システムは従来のGitService/HostAdapterを使用しなければならない
- **REQ-014**: `clone_location`が`docker`の場合、システムはDockerGitService/DockerAdapterを使用しなければならない

### Host環境の動作保証

- **REQ-015**: Host環境プロジェクトのセッション作成時、システムはworktreeをホストファイルシステム上に作成しなければならない
- **REQ-016**: Host環境セッションのPTY作成時、システムはホスト上で直接PTYプロセスを起動しなければならない
- **REQ-017**: Host環境のgit操作時、システムはホストファイルシステム上でgitコマンドを実行しなければならない

## 受入基準

- [ ] Host環境プロジェクトで新規セッションを作成できる（既存動作と同じ）
- [ ] Host環境セッションのすべてのタブ（Claude/Shell/Diff/Commits）が正常に動作する
- [ ] Host環境のworktreeがホストファイルシステム上に作成される
- [ ] 既存のHost環境セッションが正常に動作し続ける

## 関連ストーリー

- US-001: Docker環境でのセッション作成と使用

## 技術メモ

- clone_locationフィールドで環境を判別
- HostAdapterは既存の実装を維持
- 環境判別ロジックはAdapterFactoryで行う

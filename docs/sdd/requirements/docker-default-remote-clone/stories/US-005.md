# US-005: ドキュメント更新

## ユーザーストーリー

**私は** ClaudeWorkのユーザー・開発者として
**〜したい** Docker主体の新しいアーキテクチャに合わせてドキュメントが更新されている
**なぜなら** 正確な情報に基づいて開発・利用したい

## 受入基準（EARS記法）

### CLAUDE.md

- **REQ-058**: CLAUDE.mdにおいて、システムはDocker主体のアーキテクチャを説明しなければならない
- **REQ-059**: アーキテクチャ概要において、システムはDocker環境がデフォルトであることを明記しなければならない
- **REQ-060**: Execution Environmentsセクションにおいて、システムはDocker環境を第一に説明しなければならない
- **REQ-061**: HOSTモードについて、システムは「レガシーサポート」または「後方互換性のため残されている」と記載しなければならない

### README.md

- **REQ-062**: README.mdにおいて、システムはDocker Engineのインストールガイドを含めなければならない
- **REQ-063**: セットアップ手順において、システムはDocker環境での実行を推奨しなければならない
- **REQ-064**: トラブルシューティングセクションにおいて、システムはDocker関連の問題と解決策を記載しなければならない

### docs/sdd/design/

- **REQ-065**: 設計書において、システムはDocker主体のデータフローを図示しなければならない
- **REQ-066**: コンポーネント図において、システムはDocker環境とリモートリポジトリの統合を示しなければならない
- **REQ-067**: シーケンス図において、システムはDocker内でのGit操作フローを説明しなければならない

### docs/remote-repo/の統合

- **REQ-068**: 既存の`docs/remote-repo/`ドキュメントを`docs/sdd/`に統合しなければならない
- **REQ-069**: 統合後、システムは古いドキュメントへの参照を新しいパスに更新しなければならない
- **REQ-070**: 統合後、システムは`docs/remote-repo/`をアーカイブまたは削除しなければならない

### API.md

- **REQ-071**: API.mdにおいて、システムは新しいエンドポイント（clone、pull、branches）を文書化しなければならない
- **REQ-072**: 各エンドポイントについて、システムはリクエスト・レスポンス例を含めなければならない
- **REQ-073**: エンドポイント説明において、システムはDocker環境での動作を明記しなければならない

## 技術的背景

### 更新が必要なドキュメント一覧

1. **CLAUDE.md**:
   - アーキテクチャ概要の書き換え
   - ExecutionEnvironmentsセクションの順序変更
   - Docker環境をデフォルトとして明記

2. **README.md**:
   - Dockerインストールガイドの追加
   - セットアップ手順の更新

3. **docs/SETUP.md**:
   - Docker環境での初回セットアップ手順
   - SSH設定ガイド

4. **docs/API.md**:
   - `POST /api/projects/clone`
   - `POST /api/projects/[id]/pull`
   - `GET /api/projects/[id]/branches`

5. **docs/sdd/design/**:
   - 新規設計書の作成
   - 既存設計書の更新

6. **docs/remote-repo/**:
   - `docs/sdd/`への統合
   - 参照パスの更新

## テストシナリオ

### シナリオ1: ドキュメントの一貫性確認

1. すべてのドキュメントを読む
2. Docker主体のアーキテクチャで統一されていることを確認
3. HOSTモードの言及が「レガシー」または「後方互換性」として記載されていることを確認

### シナリオ2: リンクの検証

1. すべてのドキュメント内リンクをチェック
2. `docs/remote-repo/`への参照が`docs/sdd/`に更新されていることを確認
3. デッドリンクがないことを確認

### シナリオ3: API仕様の正確性

1. API.mdの新しいエンドポイント仕様を確認
2. 実装と一致していることを確認
3. リクエスト・レスポンス例が正確であることを確認

## 非機能要件

- ドキュメントは平易な日本語で記述されること
- コード例はシンタックスハイライトされること
- 図は最新のMermaid記法で記述されること
- すべてのドキュメントが相互参照可能であること

## 依存関係

- US-001, US-002, US-003, US-004の実装完了
- 設計書の完成

## 関連ストーリー

- すべてのユーザーストーリー（実装内容を反映するため）

## 更新チェックリスト

- [ ] CLAUDE.md更新
- [ ] README.md更新
- [ ] docs/SETUP.md更新
- [ ] docs/API.md更新
- [ ] docs/sdd/design/更新
- [ ] docs/remote-repo/統合
- [ ] リンク検証
- [ ] 図の更新
- [ ] デッドリンク削除

## ステータス

- [x] 要件定義完了
- [ ] 設計完了
- [ ] 実装完了
- [ ] テスト完了
- [ ] ドキュメント更新完了

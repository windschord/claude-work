# ユーザビリティ要件

> 非機能要件カテゴリ: ユーザビリティ

## 概要

開発ツール設定管理機能は、技術的に複雑な操作（SSH 鍵管理、階層的設定）を扱うため、ユーザーにとって直感的で使いやすいインターフェースを提供する必要があります。エラーメッセージ、フィードバック、レスポンシブ対応を重視します。

## 要件一覧

### NFR-USA-001: 明確なエラーメッセージ

**EARS記法**: もしバリデーションエラーが発生した場合、システムは具体的な修正方法を含むエラーメッセージを表示しなければならない

**測定基準**:
- 指標: エラーメッセージの具体性と有用性
- 目標値: ユーザビリティテストで 80% 以上のユーザーがエラーを自己解決できること
- 測定方法:
  - ユーザーテストでのタスク完了率
  - エラーメッセージの内容レビュー

**関連する機能要件**: REQ-005-004, REQ-005-005, REQ-005-006

**優先度**: 高

**検証方法**:
- [ ] 無効なメールアドレス入力時、"有効なメールアドレスを入力してください（例: user@example.com）" と表示されることを確認
- [ ] 重複する SSH 鍵名入力時、"この名前は既に使用されています。別の名前を入力してください" と表示されることを確認
- [ ] 無効な SSH 鍵ファイルアップロード時、"有効な SSH 鍵ファイルを選択してください（OpenSSH 形式）" と表示されることを確認

**良いエラーメッセージの例**:
```
❌ 悪い例: "エラーが発生しました"
✅ 良い例: "Git Email の形式が正しくありません。メールアドレス形式（例: user@example.com）で入力してください"
```

---

### NFR-USA-002: 操作フィードバックの提供

**EARS記法**: ユーザーが設定を保存する操作を実行した時、システムは 3 秒以内に成功/失敗のフィードバックを表示しなければならない

**測定基準**:
- 指標: フィードバック表示までの時間
- 目標値: 3 秒以内
- 測定方法:
  - UI テストでフィードバックの表示タイミングを計測
  - ユーザーテストでフィードバックの視認性を評価

**関連する機能要件**: REQ-005-007, REQ-005-008, REQ-005-009

**優先度**: 高

**検証方法**:
- [ ] Git 設定保存後、"設定を保存しました" という成功メッセージが表示されることを確認
- [ ] メッセージが 3 秒後に自動的に消えることを確認
- [ ] 保存中にローディングインジケーター（スピナー）が表示されることを確認
- [ ] ネットワークエラー時、エラーメッセージがユーザーが閉じるまで表示され続けることを確認

**フィードバックの種類**:
- 成功メッセージ: 緑色の背景、チェックアイコン、3 秒後に自動消去
- エラーメッセージ: 赤色の背景、警告アイコン、ユーザーが閉じるまで表示
- ローディング: 青色のスピナー、ボタンを無効化

---

### NFR-USA-003: レスポンシブデザイン

**EARS記法**: システムはモバイル（幅 768px 未満）、タブレット（幅 768px〜1024px）、デスクトップ（幅 1024px 以上）のすべてのデバイスで適切に表示されなければならない

**測定基準**:
- 指標: レスポンシブブレイクポイントでの表示品質
- 目標値: すべてのブレイクポイントで UI が崩れないこと
- 測定方法:
  - ブラウザ開発ツールのレスポンシブモードでテスト
  - 実機（iPhone, iPad, Android）でのテスト

**関連する機能要件**: REQ-005-010, REQ-005-011

**優先度**: 中

**検証方法**:
- [ ] モバイル（375px 幅）でタブが縦並びになることを確認
- [ ] タブレット（768px 幅）でタブが横並びになることを確認
- [ ] デスクトップ（1280px 幅）で最適なレイアウトが表示されることを確認
- [ ] SSH 鍵一覧テーブルがモバイルで横スクロール可能なことを確認

**ブレイクポイント**:
- モバイル: `< 768px` - タブを縦並び、テーブルを横スクロール
- タブレット: `768px - 1024px` - タブを横並び、フォーム幅を調整
- デスクトップ: `> 1024px` - 最大幅 1200px で中央配置

---

## ユーザビリティ改善のための推奨事項

### アクセシビリティ

- すべてのフォーム要素に `<label>` を設定
- エラーメッセージは `aria-live="assertive"` で読み上げ
- キーボードナビゲーション対応（Tab キーでフォーカス移動）
- フォーカス時の視覚的なハイライト（青色ボーダー）

### ヘルプ機能

- 各セクションに "?" アイコンでツールチップを表示
  - Git 設定: "プロジェクトごとに異なる Git アイデンティティを使い分けできます"
  - SSH 鍵: "プライベートリポジトリへのアクセスに使用します"
- 空状態（設定がない場合）のガイダンス表示

### 確認ダイアログ

- 削除操作時は必ず確認ダイアログを表示
- "本当に削除しますか？この操作は取り消せません。" といった明確な警告文

### プレビュー機能

- SSH 公開鍵の全文をモーダルで表示
- 現在の有効設定を読み取り専用で表示（どの設定が適用されているか明示）

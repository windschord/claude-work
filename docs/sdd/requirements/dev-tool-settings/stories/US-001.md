# US-001: グローバル Git 設定の管理

## ユーザーストーリー

**私は** ClaudeWork の利用者として
**〜したい** グローバルな Git username と email を設定・管理したい
**なぜなら** すべてのプロジェクトで共通のデフォルト Git アイデンティティを使用したいから

## 受入基準（EARS記法）

### 機能要件

- **REQ-001-001**: ユーザーが設定画面でグローバル Git username を入力した時、システムはデータベースに保存しなければならない
- **REQ-001-002**: ユーザーが設定画面でグローバル Git email を入力した時、システムはデータベースに保存しなければならない
- **REQ-001-003**: グローバル設定が存在する場合、システムは設定画面で現在の値を表示しなければならない
- **REQ-001-004**: ユーザーがグローバル設定を更新した時、システムは既存の値を上書きしなければならない
- **REQ-001-005**: もしプロジェクト別設定が存在しない場合、システムはグローバル設定を使用しなければならない

## 画面/UI要件

### 設定画面（/settings/developer）

**グローバル設定セクション**:
- ラベル: "グローバル Git 設定（全プロジェクト共通）"
- 入力フィールド:
  - Git Username（テキスト入力）
  - Git Email（メール形式入力、バリデーション付き）
- 保存ボタン
- 成功/エラーメッセージ表示エリア

## データ要件

### DeveloperSettings テーブル（新規）

| カラム名 | 型 | 制約 | 説明 |
|---------|-----|------|------|
| id | String | PRIMARY KEY, UUID | 設定ID |
| scope | Enum(GLOBAL, PROJECT) | NOT NULL | 設定スコープ |
| project_id | String | NULLABLE, FK(Project.id) | プロジェクトID（GLOBAL の場合は NULL） |
| git_username | String | NULLABLE | Git username |
| git_email | String | NULLABLE | Git email |
| created_at | DateTime | NOT NULL | 作成日時 |
| updated_at | DateTime | NOT NULL | 更新日時 |

**制約**:
- UNIQUE(scope, project_id): グローバル設定は1つのみ、プロジェクト別設定はプロジェクトごとに1つ
- project_id が NULL の場合、scope は GLOBAL でなければならない

## 関連ストーリー

- [US-002](US-002.md) @US-002.md: プロジェクト別設定がこのグローバル設定を上書き
- [US-004](US-004.md) @US-004.md: Docker 環境でこの設定が自動適用される

## 備考

- グローバル設定は必須ではありませんが、プロジェクト別設定がない場合のフォールバックとして機能します
- メールアドレスのバリデーションは RFC 5322 に準拠します
- 既存の GitHubPAT 機能とは独立しており、併用可能です

---

## EARS記法ガイド

### パターン選択
| パターン | キーワード | 使用場面 |
|---------|-----------|----------|
| 基本形 | (なし) | 常時適用される要件 |
| イベント | 〜の時 | 特定イベントで発動 |
| 条件付き | もし〜ならば | 条件成立時のみ適用 |
| 継続的 | 〜の間 | 状態が続く間適用 |
| 場所 | 〜において | 特定コンテキストで適用 |

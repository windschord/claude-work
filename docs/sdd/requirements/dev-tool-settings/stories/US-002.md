# US-002: プロジェクト別 Git 設定の上書き

## ユーザーストーリー

**私は** ClaudeWork の利用者として
**〜したい** プロジェクトごとに異なる Git username と email を設定したい
**なぜなら** 業務用プロジェクトと個人プロジェクトで異なる Git アイデンティティを使い分けたいから

## 受入基準（EARS記法）

### 機能要件

- **REQ-002-001**: ユーザーがプロジェクト設定画面で Git username を入力した時、システムはそのプロジェクトに紐づけて保存しなければならない
- **REQ-002-002**: ユーザーがプロジェクト設定画面で Git email を入力した時、システムはそのプロジェクトに紐づけて保存しなければならない
- **REQ-002-003**: もしプロジェクト別設定が存在する場合、システムはグローバル設定よりプロジェクト別設定を優先しなければならない
- **REQ-002-004**: ユーザーがプロジェクト設定を削除した時、システムはグローバル設定にフォールバックしなければならない
- **REQ-002-005**: プロジェクト設定画面で、システムは現在の有効な設定値（プロジェクト設定 または グローバル設定）を表示しなければならない
- **REQ-002-006**: もしプロジェクト設定とグローバル設定の両方が未設定の場合、システムは警告メッセージを表示しなければならない

## 画面/UI要件

### プロジェクト設定タブ（/settings/developer）

**プロジェクト別設定セクション**:
- プロジェクト選択ドロップダウン
- ラベル: "プロジェクト別 Git 設定（グローバル設定を上書き）"
- 入力フィールド:
  - Git Username（テキスト入力、プレースホルダーでグローバル設定値を表示）
  - Git Email（メール形式入力、プレースホルダーでグローバル設定値を表示）
- 保存ボタン
- リセットボタン（プロジェクト設定を削除してグローバル設定に戻す）
- 現在の有効設定の表示（読み取り専用、どの設定が適用されているか明示）

**表示例**:
```
現在の有効設定:
  Git Username: john.doe (グローバル設定から適用)
  Git Email: john@company.com (プロジェクト設定から適用)
```

## データ要件

### DeveloperSettings テーブル（US-001 で定義済み）

プロジェクト別設定の場合:
- `scope = PROJECT`
- `project_id = <対象プロジェクトID>`

## 関連ストーリー

- [US-001](US-001.md) @US-001.md: グローバル設定がフォールバック値として機能
- [US-004](US-004.md) @US-004.md: Docker 環境でプロジェクト設定が優先適用される

## 備考

### 優先順位ルール

```
プロジェクト別設定（username） > グローバル設定（username） > 未設定
プロジェクト別設定（email）    > グローバル設定（email）    > 未設定
```

各フィールドは独立して評価され、username はプロジェクト設定、email はグローバル設定といった混在も可能です。

### UI/UX 配慮

- プロジェクト設定入力欄のプレースホルダーにグローバル設定値を表示することで、ユーザーが現在のフォールバック値を確認できます
- リセットボタンは確認ダイアログを表示します（誤操作防止）

---

## EARS記法ガイド

### パターン選択
| パターン | キーワード | 使用場面 |
|---------|-----------|----------|
| 基本形 | (なし) | 常時適用される要件 |
| イベント | 〜の時 | 特定イベントで発動 |
| 条件付き | もし〜ならば | 条件成立時のみ適用 |
| 継続的 | 〜の間 | 状態が続く間適用 |
| 場所 | 〜において | 特定コンテキストで適用 |

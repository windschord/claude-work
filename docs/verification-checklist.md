# 全画面・全ボタン動作確認チェックリスト

## 概要
requirements.mdの全要件に基づいて、すべての画面とボタンの動作を網羅的に確認する。

## 画面一覧

### 1. ログインページ (`/login`)

**URL**: `http://localhost:3000/login`

**要件**: REQ-054, REQ-055, REQ-056, REQ-057

**UI要素**:
- [ ] ClaudeWorkロゴ（見出し）
- [ ] テーマ切り替えボタン（REQ-067）
- [ ] 認証トークン入力フィールド（REQ-055）
- [ ] ログインボタン（REQ-056）

**テスト項目**:
- [ ] トークン未入力時、ログインボタンが無効化されている
- [ ] 正しいトークン入力時、ログインが成功しダッシュボードにリダイレクトされる（REQ-056）
- [ ] 間違ったトークン入力時、エラーメッセージが表示される
- [ ] テーマ切り替えボタンが動作する（REQ-067）

### 2. プロジェクト一覧ページ (`/`)

**URL**: `http://localhost:3000/`

**要件**: REQ-001, REQ-002, REQ-003, REQ-004, REQ-005

**UI要素**:
- [ ] ClaudeWorkロゴボタン（ヘッダー）
- [ ] テーマ切り替えボタン（ヘッダー）（REQ-067）
- [ ] ログアウトボタン（ヘッダー）
- [ ] プロジェクト追加ボタン（REQ-001）
- [ ] プロジェクトカード（各プロジェクト）
  - [ ] プロジェクト名
  - [ ] パス表示
  - [ ] 「開く」ボタン（REQ-004）
  - [ ] 「削除」ボタン（REQ-005）
- [ ] サイドバー: プロジェクト一覧リンク

**テスト項目**:
- [ ] ClaudeWorkロゴボタンをクリックでトップページに遷移（Phase 21）
- [ ] プロジェクト追加ボタンをクリックでモーダルが開く（REQ-001）
- [ ] プロジェクト追加モーダル:
  - [ ] パス入力フィールド
  - [ ] 「追加」ボタン
  - [ ] 「キャンセル」ボタン
  - [ ] Gitリポジトリでない場合、エラーメッセージ表示（REQ-002）
  - [ ] 正常追加後、一覧に表示される（REQ-003）
  - [ ] 既に登録済みのパスの場合、409エラー（NFR-015）
- [ ] 「開く」ボタンをクリックでプロジェクト詳細ページに遷移（REQ-004）
- [ ] 「削除」ボタンをクリックで確認ダイアログ表示
- [ ] 削除確認後、プロジェクトが一覧から削除される（REQ-005）
- [ ] ログアウトボタンをクリックでログインページにリダイレクト

### 3. プロジェクト詳細ページ (`/projects/:id`)

**URL**: `http://localhost:3000/projects/:id`

**要件**: REQ-006, REQ-007, REQ-008, REQ-009, REQ-010, REQ-011, REQ-012, REQ-013, REQ-014, REQ-015, REQ-016, REQ-029, REQ-030, REQ-031, REQ-032

**UI要素**:
- [ ] ヘッダー（共通）
  - [ ] ClaudeWorkロゴボタン
  - [ ] テーマ切り替えボタン
  - [ ] ログアウトボタン
- [ ] サイドバー:
  - [ ] プロジェクト一覧リンク
  - [ ] プロジェクト名表示
  - [ ] セッション一覧
    - [ ] 各セッションボタン
    - [ ] セッションステータスアイコン（REQ-015）
    - [ ] Git状態インジケーター（REQ-016）
- [ ] メインエリア:
  - [ ] プロジェクト名（見出し）
  - [ ] パス表示
  - [ ] 「新規セッション」ボタン（REQ-008）
  - [ ] 「プロジェクト設定」ボタン（REQ-006）
  - [ ] セッション一覧テーブル

**テスト項目**:
- [ ] 新規セッションボタンをクリックでモーダルが開く（REQ-008）
- [ ] 新規セッションモーダル:
  - [ ] セッション名入力フィールド
  - [ ] プロンプト入力エリア（REQ-008）
  - [ ] プロンプト履歴ドロップダウン（REQ-018, REQ-019）
  - [ ] セッション数選択（1〜10）（REQ-009）
  - [ ] モデル選択（Auto/Opus/Sonnet/Haiku）（REQ-029, REQ-030, REQ-031）
  - [ ] 「作成」ボタン
  - [ ] 「キャンセル」ボタン
  - [ ] 複数セッション作成時、番号付き名前が生成される（REQ-010）
  - [ ] 作成後、セッションが一覧に追加される（REQ-013）
  - [ ] worktree作成失敗時、エラーメッセージ表示（REQ-012）
- [ ] プロジェクト設定ボタンをクリックで設定モーダルが開く（REQ-006）
- [ ] プロジェクト設定モーダル:
  - [ ] ランスクリプト入力フィールド（テスト、ビルド等）（REQ-006, REQ-007）
  - [ ] デフォルトモデル選択（REQ-032）
  - [ ] 「保存」ボタン
  - [ ] 「キャンセル」ボタン
- [ ] セッション選択でセッション詳細ページに遷移（REQ-014）
- [ ] セッションステータスが正しく表示される（初期化中/実行中/入力待ち/完了/エラー）（REQ-015）
- [ ] Git状態インジケーターが正しく表示される（未コミット変更あり/クリーン）（REQ-016）

### 4. セッション詳細ページ (`/projects/:projectId/sessions/:sessionId`)

**URL**: `http://localhost:3000/projects/:projectId/sessions/:sessionId`

**要件**: REQ-014, REQ-021〜REQ-028, REQ-033〜REQ-038, REQ-039〜REQ-043, REQ-044〜REQ-047, REQ-048〜REQ-053, REQ-058〜REQ-062

**UI要素**:
- [ ] ヘッダー（共通）
- [ ] サイドバー（共通）
- [ ] タブナビゲーション:
  - [ ] Chatタブ
  - [ ] Diffタブ
  - [ ] Terminalタブ（REQ-058）
  - [ ] Commitsタブ
  - [ ] Scriptsタブ

#### 4-1. Chatタブ

**UI要素**:
- [ ] Claude Code出力エリア（REQ-014, REQ-022, REQ-023）
  - [ ] マークダウンレンダリング（REQ-023）
  - [ ] コードブロックのシンタックスハイライト（REQ-023）
  - [ ] サブエージェント出力（折りたたみ可能）（REQ-024）
  - [ ] 権限確認UI（承認/拒否ボタン）（REQ-025, REQ-026）
- [ ] 入力フォーム:
  - [ ] テキスト入力エリア（REQ-021）
  - [ ] 「送信」ボタン（REQ-021）

**テスト項目**:
- [ ] Claude Code出力がリアルタイムで表示される（500ms以内）（REQ-022, NFR-001）
- [ ] マークダウンが正しくレンダリングされる（REQ-023）
- [ ] コードブロックにシンタックスハイライトが適用される（REQ-023）
- [ ] サブエージェント出力が折りたたみ可能（REQ-024）
- [ ] 権限確認時、承認/拒否ボタンが表示される（REQ-025）
- [ ] 承認/拒否選択がClaude Codeに送信される（REQ-026）
- [ ] 入力送信がClaude Codeプロセスに送られる（REQ-021）
- [ ] セッション完了時、ステータスが「完了」になる（REQ-027）
- [ ] Claude Code異常終了時、ステータスが「エラー」になる（REQ-028）

#### 4-2. Diffタブ

**UI要素**:
- [ ] 変更ファイル一覧（サイドバー）（REQ-047）
- [ ] Diff表示エリア（REQ-044, REQ-045, REQ-046）
  - [ ] 追加行（緑色ハイライト）（REQ-045）
  - [ ] 削除行（赤色ハイライト）（REQ-045）

**テスト項目**:
- [ ] worktreeとmainブランチの差分が表示される（REQ-044）
- [ ] 追加行が緑色、削除行が赤色でハイライトされる（REQ-045）
- [ ] ファイル選択で該当ファイルのdiffのみ表示される（REQ-046）
- [ ] 変更ファイル一覧がサイドバーに表示される（REQ-047）

#### 4-3. Terminalタブ

**UI要素**:
- [ ] ターミナルエリア（XTerm.js）（REQ-058, REQ-059）
  - [ ] 対話的シェル（REQ-059）
  - [ ] ANSIエスケープシーケンスレンダリング（REQ-061）

**テスト項目**:
- [ ] worktreeをカレントディレクトリとしたターミナルが開く（REQ-058）
- [ ] XTerm.jsで対話的シェルが動作する（REQ-059）
- [ ] ユーザー入力がサーバー側PTYプロセスに送信される（REQ-060）
- [ ] ANSIエスケープシーケンスが正しくレンダリングされる（REQ-061）
- [ ] セッション切り替え時、ターミナルセッションが維持される（REQ-062）

#### 4-4. Commitsタブ

**UI要素**:
- [ ] コミット一覧（REQ-039, REQ-040）
  - [ ] コミットハッシュ
  - [ ] コミットメッセージ
  - [ ] 日時
  - [ ] 変更ファイル数
- [ ] コミット選択時:
  - [ ] 変更内容（diff）表示（REQ-041）
  - [ ] 「このコミットに戻る」ボタン（REQ-042）

**テスト項目**:
- [ ] worktree内の全コミットが時系列で表示される（REQ-039）
- [ ] 各コミットのハッシュ、メッセージ、日時、変更ファイル数が表示される（REQ-040）
- [ ] コミット選択時、変更内容（diff）が表示される（REQ-041）
- [ ] 「このコミットに戻る」クリックで確認ダイアログ表示（REQ-042）
- [ ] 確認後、git resetでworktreeが選択コミットに戻る（REQ-043）

#### 4-5. Scriptsタブ

**UI要素**:
- [ ] ランスクリプト一覧（REQ-033）
  - [ ] 各スクリプトの「実行」ボタン（REQ-033）
  - [ ] 「停止」ボタン（実行中のみ）（REQ-038）
- [ ] ログ出力エリア（REQ-034）
  - [ ] フィルター（info/warn/error）（REQ-035）
  - [ ] テキスト検索（REQ-036）
  - [ ] 終了コードと実行時間表示（REQ-037）

**テスト項目**:
- [ ] 実行ボタンでランスクリプトがworktree内で実行される（REQ-033）
- [ ] 実行中、出力がリアルタイムでログタブに表示される（REQ-034）
- [ ] ログフィルター（info/warn/error）が動作する（REQ-035）
- [ ] テキスト検索機能が動作する（REQ-036）
- [ ] スクリプト終了時、終了コードと実行時間が表示される（REQ-037）
- [ ] 停止ボタンでプロセスが終了する（REQ-038）

#### 4-6. Git操作（セッション詳細ページ全体）

**UI要素**:
- [ ] 「mainから取り込み」ボタン（REQ-048）
- [ ] 「スカッシュしてマージ」ボタン（REQ-050）

**テスト項目**:
- [ ] 「mainから取り込み」でmainブランチの最新変更がworktreeにrebaseされる（REQ-048）
- [ ] rebase中のコンフリクト発生時、通知が表示され手動解決を促す（REQ-049）
- [ ] 「スカッシュしてマージ」でコミットメッセージ入力フォームが表示される（REQ-050）
- [ ] マージ実行でworktree内の全コミットがスカッシュされmainにマージされる（REQ-051）
- [ ] マージ成功時、worktree削除確認ダイアログが表示される（REQ-052）
- [ ] 削除確認後、worktreeとセッションが削除される（REQ-053）

### 5. モバイル対応

**要件**: REQ-063, REQ-064, REQ-065

**テスト項目**:
- [ ] 画面幅768px未満でモバイルレイアウトに切り替わる（REQ-063）
- [ ] モバイル表示でセッション一覧がカード形式で表示される（REQ-064）
- [ ] タッチ操作でセッション選択・入力が可能（REQ-065）

### 6. テーマ設定

**要件**: REQ-066, REQ-067, REQ-068, REQ-069

**テスト項目**:
- [ ] 初回アクセス時、OSのテーマ設定に従ってライト/ダークモードが適用される（REQ-066）
- [ ] テーマ切り替えボタンでライト/ダークモードが切り替わる（REQ-067）
- [ ] テーマ選択がローカルストレージに保存される（REQ-068）
- [ ] 再アクセス時、保存されたテーマ設定が適用される（REQ-069）

## 非機能要件

### パフォーマンス
- [ ] Claude Code出力が500ms以内にブラウザに表示される（NFR-001）
- [ ] 10個の並列セッションを同時管理できる（NFR-002）
- [ ] APIレスポンスが95パーセンタイルで200ms以内（NFR-003）

### セキュリティ
- [ ] 認証なしでのアクセスが拒否される（REQ-054）
- [ ] 認証トークンがハッシュ化されて保存される（NFR-005）
- [ ] `ALLOWED_PROJECT_DIRS`設定時、指定ディレクトリ配下のみ登録可能（NFR-014）

### エラーハンドリング
- [ ] APIエラー時、日本語のエラーメッセージがトースト通知で表示される（NFR-016）
- [ ] エラー発生時もアプリケーション全体がクラッシュしない（NFR-017）

### 可用性
- [ ] サーバー再起動後も既存worktree情報が復元される（NFR-007）
- [ ] Claude Codeプロセスクラッシュ時、セッションステータスが「エラー」に更新される（NFR-008）

## 検証ステータス

- **ログインページ**: ✅ トークン入力・検証動作確認済み
- **プロジェクト一覧ページ**: 🔄 未検証
- **プロジェクト詳細ページ**: 🔄 未検証
- **セッション詳細ページ**: 🔄 未検証
- **モバイル対応**: 🔄 未検証
- **テーマ設定**: 🔄 未検証

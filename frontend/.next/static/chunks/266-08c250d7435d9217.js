"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{9632:function(t,e,a){a.d(e,{Z:function(){return n}});var i=a(7821);function n(t){let{status:e,className:a="",showLabel:n=!0}=t,c=(t=>{switch(t){case"initializing":return{color:"text-blue-500",bgColor:"bg-blue-100",label:"初期化中",description:"セッションを初期化しています",icon:(0,i.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})};case"running":return{color:"text-green-500",bgColor:"bg-green-100",label:"実行中",description:"セッションが実行中です",icon:(0,i.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})};case"waiting_input":return{color:"text-yellow-500",bgColor:"bg-yellow-100",label:"入力待ち",description:"ユーザーの入力を待っています",icon:(0,i.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})};case"completed":return{color:"text-gray-500",bgColor:"bg-gray-100",label:"完了",description:"セッションが完了しました",icon:(0,i.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})};case"error":return{color:"text-red-500",bgColor:"bg-red-100",label:"エラー",description:"エラーが発生しました",icon:(0,i.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}}})(e);return(0,i.jsxs)("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-full ".concat(c.bgColor," ").concat(a," group relative"),title:c.description,children:[(0,i.jsx)("span",{className:c.color,children:c.icon}),n&&(0,i.jsx)("span",{className:"text-xs font-medium ".concat(c.color),children:c.label}),(0,i.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:c.description})]})}},4790:function(t,e,a){a.d(e,{h:function(){return c}});let i=a(2949).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";class n extends Error{constructor(t,e){super(e),this.status=t,this.name="ApiError"}}let c={async login(t){let e=new FormData;e.append("token",t);let a=await fetch("".concat(i,"/api/auth/login"),{method:"POST",body:e,credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"ログインに失敗しました"}));throw new n(a.status,t.detail||"ログインに失敗しました")}},async logout(){let t=await fetch("".concat(i,"/api/auth/logout"),{method:"POST",credentials:"include"});if(!t.ok){let e=await t.json().catch(()=>({detail:"ログアウトに失敗しました"}));throw new n(t.status,e.detail||"ログアウトに失敗しました")}},async checkAuth(){try{return(await fetch("".concat(i,"/api/auth/me"),{method:"GET",credentials:"include"})).ok}catch(t){return!1}},async getProjects(){let t=await fetch("".concat(i,"/api/projects"),{method:"GET",credentials:"include"});if(!t.ok){let e=await t.json().catch(()=>({detail:"プロジェクト一覧の取得に失敗しました"}));throw new n(t.status,e.detail||"プロジェクト一覧の取得に失敗しました")}return await t.json()},async createProject(t,e){let a=await fetch("".concat(i,"/api/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,default_model:e}),credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"プロジェクトの作成に失敗しました"}));throw new n(a.status,t.detail||"プロジェクトの作成に失敗しました")}return await a.json()},async updateProject(t,e,a){let c=await fetch("".concat(i,"/api/projects/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,default_model:a}),credentials:"include"});if(!c.ok){let t=await c.json().catch(()=>({detail:"プロジェクトの更新に失敗しました"}));throw new n(c.status,t.detail||"プロジェクトの更新に失敗しました")}return await c.json()},async deleteProject(t){let e=await fetch("".concat(i,"/api/projects/").concat(t),{method:"DELETE",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"プロジェクトの削除に失敗しました"}));throw new n(e.status,t.detail||"プロジェクトの削除に失敗しました")}},async getSessions(t){let e=await fetch("".concat(i,"/api/projects/").concat(t,"/sessions"),{method:"GET",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"セッション一覧の取得に失敗しました"}));throw new n(e.status,t.detail||"セッション一覧の取得に失敗しました")}return await e.json()},async createSession(t,e,a,c,o){let s=await fetch("".concat(i,"/api/projects/").concat(t,"/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,message:a||"",count:c,model:o}),credentials:"include"});if(!s.ok){let t=await s.json().catch(()=>({detail:"セッションの作成に失敗しました"}));throw new n(s.status,t.detail||"セッションの作成に失敗しました")}return await s.json()},async getSession(t){let e=await fetch("".concat(i,"/api/sessions/").concat(t),{method:"GET",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"セッションの取得に失敗しました"}));throw new n(e.status,t.detail||"セッションの取得に失敗しました")}return await e.json()},async stopSession(t){let e=await fetch("".concat(i,"/api/sessions/").concat(t,"/stop"),{method:"POST",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"セッションの停止に失敗しました"}));throw new n(e.status,t.detail||"セッションの停止に失敗しました")}},async deleteSession(t){let e=await fetch("".concat(i,"/api/sessions/").concat(t),{method:"DELETE",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"セッションの削除に失敗しました"}));throw new n(e.status,t.detail||"セッションの削除に失敗しました")}},async getMessages(t){let e=await fetch("".concat(i,"/api/sessions/").concat(t,"/messages"),{method:"GET",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"メッセージ一覧の取得に失敗しました"}));throw new n(e.status,t.detail||"メッセージ一覧の取得に失敗しました")}return await e.json()},async sendMessage(t,e){let a=await fetch("".concat(i,"/api/sessions/").concat(t,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e}),credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"メッセージの送信に失敗しました"}));throw new n(a.status,t.detail||"メッセージの送信に失敗しました")}return await a.json()},async respondToPermission(t,e,a){let c=await fetch("".concat(i,"/api/sessions/").concat(t,"/permissions/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:a}),credentials:"include"});if(!c.ok){let t=await c.json().catch(()=>({detail:"権限確認の応答に失敗しました"}));throw new n(c.status,t.detail||"権限確認の応答に失敗しました")}},async getDiff(t){let e=await fetch("".concat(i,"/api/sessions/").concat(t,"/diff"),{method:"GET",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"Diff情報の取得に失敗しました"}));throw new n(e.status,t.detail||"Diff情報の取得に失敗しました")}return await e.json()},async rebaseFromMain(t){let e=await fetch("".concat(i,"/api/sessions/").concat(t,"/rebase"),{method:"POST",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"rebaseに失敗しました"}));throw new n(e.status,t.detail||"rebaseに失敗しました")}return await e.json()},async squashMerge(t,e){let a=await fetch("".concat(i,"/api/sessions/").concat(t,"/merge"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e}),credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"マージに失敗しました"}));throw new n(a.status,t.detail||"マージに失敗しました")}return await a.json()},async getPromptHistory(t){let e=await fetch("".concat(i,"/api/projects/").concat(t,"/prompt-history"),{method:"GET",credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"プロンプト履歴の取得に失敗しました"}));throw new n(e.status,t.detail||"プロンプト履歴の取得に失敗しました")}return await e.json()},async savePromptHistory(t,e){let a=await fetch("".concat(i,"/api/projects/").concat(t,"/prompt-history"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_text:e}),credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"プロンプト履歴の保存に失敗しました"}));throw new n(a.status,t.detail||"プロンプト履歴の保存に失敗しました")}return await a.json()},async deletePromptHistory(t,e){let a=await fetch("".concat(i,"/api/projects/").concat(t,"/prompt-history/").concat(e),{method:"DELETE",credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"プロンプト履歴の削除に失敗しました"}));throw new n(a.status,t.detail||"プロンプト履歴の削除に失敗しました")}},async getCommitHistory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=await fetch("".concat(i,"/api/sessions/").concat(t,"/commits?limit=").concat(e),{method:"GET",credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"コミット履歴の取得に失敗しました"}));throw new n(a.status,t.detail||"コミット履歴の取得に失敗しました")}return await a.json()},async getCommitDiff(t,e){let a=await fetch("".concat(i,"/api/sessions/").concat(t,"/commits/").concat(e,"/diff"),{method:"GET",credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"コミットのdiff取得に失敗しました"}));throw new n(a.status,t.detail||"コミットのdiff取得に失敗しました")}return await a.json()},async resetToCommit(t,e){let a=await fetch("".concat(i,"/api/sessions/").concat(t,"/commits/").concat(e,"/reset"),{method:"POST",credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"コミットへのリセットに失敗しました"}));throw new n(a.status,t.detail||"コミットへのリセットに失敗しました")}return await a.json()},async getRunScripts(t){let e=await fetch("".concat(i,"/api/projects/").concat(t,"/run-scripts"),{credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({detail:"ランスクリプト一覧の取得に失敗しました"}));throw new n(e.status,t.detail||"ランスクリプト一覧の取得に失敗しました")}return await e.json()},async createRunScript(t,e,a){let c=await fetch("".concat(i,"/api/projects/").concat(t,"/run-scripts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,command:a}),credentials:"include"});if(!c.ok){let t=await c.json().catch(()=>({detail:"ランスクリプトの作成に失敗しました"}));throw new n(c.status,t.detail||"ランスクリプトの作成に失敗しました")}return await c.json()},async updateRunScript(t,e,a,c){let o=await fetch("".concat(i,"/api/projects/").concat(t,"/run-scripts/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,command:c}),credentials:"include"});if(!o.ok){let t=await o.json().catch(()=>({detail:"ランスクリプトの更新に失敗しました"}));throw new n(o.status,t.detail||"ランスクリプトの更新に失敗しました")}return await o.json()},async deleteRunScript(t,e){let a=await fetch("".concat(i,"/api/projects/").concat(t,"/run-scripts/").concat(e),{method:"DELETE",credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"ランスクリプトの削除に失敗しました"}));throw new n(a.status,t.detail||"ランスクリプトの削除に失敗しました")}},async executeRunScript(t,e){let a=await fetch("".concat(i,"/api/execute-script/").concat(t,"/").concat(e),{method:"POST",credentials:"include"});if(!a.ok){let t=await a.json().catch(()=>({detail:"スクリプトの実行に失敗しました"}));throw new n(a.status,t.detail||"スクリプトの実行に失敗しました")}return await a.json()}}},4549:function(t,e,a){a.d(e,{Y:function(){return c}});var i=a(4553),n=a(4790);let c=(0,i.U)((t,e)=>({runScripts:{},loading:!1,error:null,fetchRunScripts:async e=>{t({loading:!0,error:null});try{let a=await n.h.getRunScripts(e);t(t=>({runScripts:{...t.runScripts,[e]:a},loading:!1}))}catch(e){t({error:e instanceof Error?e.message:"ランスクリプトの取得に失敗しました",loading:!1})}},createRunScript:async(e,a,i)=>{t({loading:!0,error:null});try{let c=await n.h.createRunScript(e,a,i);t(t=>({runScripts:{...t.runScripts,[e]:[...t.runScripts[e]||[],c]},loading:!1}))}catch(e){throw t({error:e instanceof Error?e.message:"ランスクリプトの作成に失敗しました",loading:!1}),e}},updateRunScript:async(e,a,i,c)=>{t({loading:!0,error:null});try{let o=await n.h.updateRunScript(e,a,i,c);t(t=>({runScripts:{...t.runScripts,[e]:(t.runScripts[e]||[]).map(t=>t.id===a?o:t)},loading:!1}))}catch(e){throw t({error:e instanceof Error?e.message:"ランスクリプトの更新に失敗しました",loading:!1}),e}},deleteRunScript:async(e,a)=>{t({loading:!0,error:null});try{await n.h.deleteRunScript(e,a),t(t=>({runScripts:{...t.runScripts,[e]:(t.runScripts[e]||[]).filter(t=>t.id!==a)},loading:!1}))}catch(e){throw t({error:e instanceof Error?e.message:"ランスクリプトの削除に失敗しました",loading:!1}),e}},clearError:()=>t({error:null})}))}}]);